<!--
  ~ Time:2022/2/14 21:23 27
  ~ Name:awefawefawef].html
  ~ Path:Web代码/src/com/charlatan/practice/Node/留言板
  ~ ProjectName:WWW
  ~ Author:charlatan
  ~
  ~  Il n'ya qu'un héroïsme au monde : c'est de voir le monde tel qu'il est et de l'aimer.
  -->
<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta content="IE=edge" http-equiv="X-UA-Compatible">
	<meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
	<title>Title</title>

</head>
<body>


<div contentEditable="true" style="height:50px; border:2px solid red;"></div>
光标前的字符：<span id="selection"></span>


</body>
<script>
	var cursor = 0// 光标位置
	document.onselectionchange = function () {
		var range = document.selection.createRange()
		var srcele = range.parentElement()
		var copy = document.body.createTextRange()
		copy.moveToElementText(srcele)
		for (cursor = 0; copy.compareEndPoints("StartToStart", range) < 0; cursor++) {
			copy.moveStart('character', 1)
		}
		document.getElementById('selection').innerText = srcele.innerText.substring(cursor - 1, cursor)
	}
	//-->

</script>
</html>


</body>

</html>
