<!--
  ~ Time:2022/2/10 15:56 01
  ~ Name:测试.html
  ~ Path:Web代码/src/com/charlatan/practice/Node/留言板
  ~ ProjectName:WWW
  ~ Author:charlatan
  ~
  ~  Il n'ya qu'un héroïsme au monde : c'est de voir le monde tel qu'il est et de l'aimer.
  -->
<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta content="IE=edge" http-equiv="X-UA-Compatible">
	<meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
	<title>测试</title>
	<style>
		* {
			margin: 0;
			padding: 0;
			list-style: none;
			font: 500 15px YouYuan;
			text-decoration: none;
		}

		li {
			cursor: pointer;
			position: relative;

		}

		/*-------以上为默认设置（The above is the default setting）--------*/
		div {
			background: #ff0000;
		}

		.div {
			background: #bce8f1;
		}

		#div1 {
			width: 500px;
			height: 500px;
			position: relative;
			top: 100px;
			left: calc(50% - 250px);
			overflow: hidden;
			box-shadow: 0 0 10px 10px #556885 inset;

		}

		#div2 {
			width: 400px;
			height: 400px;
			position: relative;
			background: #75e37c;
			top: 50px;
			left: calc(50% - 200px);
		}

		#div3 {
			width: 300px;
			height: 300px;
			position: relative;
			background: #e3d175;
			top: 50px;
			left: calc(50% - 150px);
		}

		#div4 {
			width: 200px;
			height: 200px;
			position: relative;
			background: #75a5e3;
			top: 50px;
			left: calc(50% - 100px);
			user-select: none;
		}
	</style>
</head>
<body>
<div id="div1" class="div" tabindex="1">
	<div id="div2">
		<div id="div3">
			<div id="div4">
				我是div4
			</div>
		</div>
	</div>
</div>
</body>
<script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.6.0/jquery.js"></script>
<script>
	$(function () {
		let div1 = $('#div1')
		let div2 = $('#div2')
		let div3 = $('#div3')
		let div4 = $('#div4')
		let flag = true

		function func1 () {
			if (div1.hasClass('div')) {
				div1.removeClass('div')
			} else {
				div1.addClass('div')
			}
		}

		// div1.click(func1)

		// div1.click(function () {
		// 	if (flag) {
		// 		div1.removeClass('div')
		// 		flag = false
		// 	}
		// })
		//
		// $(document).click(function (event) {
		//
		// 	if (event.target === div1[0]) {
		// 		div1.addClass('div')
		// 		flag = true
		// 	}
		// })

		div1.focus(function () {
			div1.removeClass('div')
		})

		div1.blur(function () {
			div1.addClass('div')

		})

		// $(document).click(function (event) {
		// 	if (func2(event.target, div1[0])) {
		// 		div1.removeClass('div')
		// 	}else {
		// 		div1.addClass('div')
		// 	}
		// })
		/**
		 *
		 * @param that 要判断的元素
		 * @param the 目标元素
		 */
		function func2 (that, the) {
			return (that === null || the === null) ? false : func3(that, the)
		}

		function func3 (that, the) {
			if (that === the) {
				return true
			}
			if ($(that)[0].tagName === 'BODY') {
				return false
			}
			return func3($(that).parent()[0], the)
		}
	})
</script>
</html>
