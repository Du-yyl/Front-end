<!--
  ~ Date:2021/12/13 20:13 18
  ~ Name:京东放大镜.html
  ~ Path:Web代码/src/com/charlatan/self_study/me/practice/JavaScript
  ~ ProjectName:WWW
  ~ Author:charlatan
  ~
  ~  Il n'ya qu'un héroïsme au monde : c'est de voir le monde tel qu'il est et de l'aimer.
  -->
<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>京东放大镜</title>
	<style>
		body {
			width: 3000px;
			height: 2000px;
		}

		* {
			margin: 0;
			padding: 0;
		}

		#box {
			width: 450px;
			height: 900px;
			position: absolute;
			z-index: 0;
			left: 500px;
			top: 500px;
		}

		#img-show {
			width: 450px;
			height: 900px;
			position: relative;
			z-index: 0;
		}

		#img {
			width: 100%;
			height: 100%;
			z-index: 0;
			position: relative;
		}

		#img-enlarge {
			width: 240px;
			height: 240px;
			background-color: rgba(234, 191, 9, 0.56);
			position: absolute;
			z-index: 10;
			top: 0;
			cursor: move;
			display: none;
		}

		#img-enlarge-show {
			width: 400px;
			height: 400px;
			position: absolute;
			left: 560px;
			top: 0;
			background-color: grey;
			display: none;
			overflow: hidden;
		}

		#img-1 {
			width: 100%;
			height: 100%;
		}

		#show {
			width: 200px;
			height: 100px;
			border: 1px solid;
			position: absolute;
			top: 700px;
			left: 900px;
		}

		#img-1 {
			position: absolute;
		}
	</style>
</head>
<body>
<div id="box">
	<div id="img-show">
		<img id="img" alt="" src="file/Carousel-5.jpg">

		<div id="img-enlarge">
		</div>
	</div>
	<div id="img-enlarge-show">
		<img id="img-1" alt="" src="file/Carousel-5.jpg">
	</div>
	<div id="show"></div>
</div>
</body>
<script>
	let imgShow = document.getElementById ('img-show')
	let imgEnlarge = document.getElementById ('img-enlarge')
	let imgEnlargeShow = document.getElementById ('img-enlarge-show')
	let show = document.getElementById ('show')
	let img = document.getElementById ('img')
	let img_1 = document.getElementById ('img-1')
	let body = document.body
	imgShow.onmouseover = () => {
		imgEnlargeShow.style.display = 'block'
		imgEnlarge.style.display = 'block'
	}
	imgShow.onmouseout = () => {
		imgEnlargeShow.style.display = 'none'
		imgEnlarge.style.display = 'none'
	}
	imgShow.onmousemove = event => {
		let scale = 2
		let x = event.pageX - imgEnlarge.offsetWidth / 2 - box.offsetLeft
		let y = event.pageY - imgEnlarge.offsetHeight / 2 - box.offsetTop
		x = x >= imgShow.offsetWidth - imgEnlarge.offsetWidth ? imgShow.offsetWidth - imgEnlarge.offsetWidth : x
		y = y >= imgShow.offsetHeight - imgEnlarge.offsetHeight ? imgShow.offsetHeight - imgEnlarge.offsetHeight : y
		x = x <= 0 ? 0 : x
		y = y <= 0 ? 0 : y
		imgEnlarge.style.top = y + 'px'
		imgEnlarge.style.left = x + 'px'
		show.innerText = 'x' + x + 'px;' + 'y' + y + 'px;'
		img_1.style.width = imgShow.offsetWidth * scale + 'px'
		img_1.style.height = imgShow.offsetHeight * scale + 'px'
		scale += .1
		img_1.style.top = -y * scale + 'px'
		img_1.style.left = -x * scale + 'px'
	}
</script>
</html>
