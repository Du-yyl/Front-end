<!--
  ~ Date:2021/12/6 17:13 28
  ~ Name:2、拖拽2.html
  ~ Path:Web代码/src/com/charlatan/self_study/me/practice/JavaScript/拖拽
  ~ ProjectName:WWW
  ~ Author:charlatan
  ~
  ~  Il n'ya qu'un héroïsme au monde : c'est de voir le monde tel qu'il est et de l'aimer.
  -->
<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>拖拽2</title>
	<style>
		#div1 {
			width: 100px;
			height: 100px;
			background-color: #9090a8;
			position: absolute;
		}

		#div2 {
			width: 100px;
			height: 100px;
			background-color: #030302;
			position: absolute;
			top: 100px;
			left: 10px;
		}
	</style>
	<script>
		/*
		 * 完成鼠标单击移动完成，鼠标还是在相对div的位置
		 * */
		window.onload = message => {
			let div1 = document.getElementById('div1')
			div1.onmousedown = (event_1) => {
				document.onmousemove = function (event) {
					let x = event.clientX
					let y = event.clientY

					let x_offset = event_1.offsetX
					let y_offset = event_1.offsetY

					div1.style.left = x - x_offset + 'px'
					div1.style.top = y - y_offset + 'px'

				}
				/*
				 * 当事件结束时，如果依然重复指定的操作，那么依然会触发这个函数，所以不能只取消鼠标移动事件
				 * */
				document.onmouseup = function () {
					document.onmousemove = null
					document.onmouseup = null
				}
				return false
			}

		}
	</script>
</head>
<body>
<div id="div1"></div>
<!-- /#div1 -->
<div id="div2"></div>
<!-- /#div2 -->
</body>
</html>
