<!--
  ~ Date:2022/1/3 16:01 18
  ~ Name:购物车.html
  ~ Path:Web代码/src/com/charlatan/homework/week_14
  ~ ProjectName:WWW
  ~ Author:charlatan
  ~
  ~  Il n'ya qu'un héroïsme au monde : c'est de voir le monde tel qu'il est et de l'aimer.
  -->
<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>购物车</title>
	<style>
		* {
			margin: 0;
			padding: 0;
			list-style: none;
			font-size: 15px;
			text-decoration: none;
		}
		
		a:link {
			color: #b700ff;
		}
		
		a:visited {
			color: #0066ff;
		}
		
		a:hover {
			color: #FF00FF;
		}
		
		a:active {
			color: #ff8800;
		}
		
		*::selection {
			color: #fff99a;
			background-color: #ff961b;
		}
		
		ul:after {
			content: "";
			height: 0;
			clear: both;
			overflow: hidden;
			display: block;
			visibility: hidden;
		}
		
		li {
			cursor: pointer;
			position: relative;
		}
		
		label, button {
			user-select: none;
			/*pointer-events:none;*/
		}
		
		/*-------以上为默认设置（The above is the default setting）--------*/
		
		#bigBox {
			width: 1620px;
			height: 100%;
			/* height: 2400px; */
			position: absolute;
			right: 0;
			left: 0;
			margin: auto;
			background-color: #bce8f1;
		}
		
		#body {
			position: relative;
			width: 90%;
			/* height: 130px; */
			right: 0;
			background-color: #bce8f1;
			left: 0;
			margin: auto;
			top: 0;
		}
		
		
		#h1 {
			position: absolute;
			font: 50px/40px "";
			text-align: center;
			right: 0;
			left: 0;
			top: 40px;
			color: #4025f5;
		}
		
		input[type="checkbox"] {
			-webkit-appearance: none;
			background: #fff url(file/no-checked.png) no-repeat;
			background-size: 28px;
			height: 28px;
			vertical-align: middle;
			width: 28px;
			transition: all .17s ease-in-out;
		}
		
		input[type="checkbox"]:checked {
			background: #fff url(file/checked.png) no-repeat -1px -1px;
			background-size: 30px;
		}
		
		/* 头部 */
		#heard {
			width: 100%;
			height: 50px;
			background-color: white;
			position: relative;
			top: 190px;
		}
		
		#heard-label {
			font: 20px "";
			position: relative;
			top: 10px;
			left: 30px;
		}
		
		#span-1 {
			font: 20px "";
			top: 10px;
			position: relative;
			left: 80px;
		}
		
		#span-2 {
			font: 20px "";
			top: 10px;
			position: relative;
			left: 520px;
		}
		
		#span-3 {
			font: 20px "";
			top: 10px;
			position: relative;
			left: 680px;
		}
		
		#span-4 {
			font: 20px "";
			top: 10px;
			position: relative;
			left: 890px;
		}
		
		#span-5 {
			font: 20px "";
			top: 10px;
			position: relative;
			left: 1010px;
		}
		
		/* 	商品列表 */
		#body-ul {
			width: 100%;
			/* height: 400px; */
			position: relative;
			/* background-color: #f32323; */
			top: 170px;
			overflow: hidden;
			transition: all .7s ease-in-out;
		}
		
		#body-ul > li {
			width: 100%;
			position: relative;
			height: 250px;
			background-color: #ffffff;
			margin-top: 30px;
			border-top: 2px solid #4cbd37;
			transition: transform .2s ease-in-out, height .6s ease-in-out, box-shadow .3s ease-in-out, left 1s ease-in-out, top .4s ease-in-out, margin-top .6s ease-in-out;
			left: 0;
			top: 0;
		}
		
		#body-ul > li:hover {
			transform: translateY(-1px);
			height: 252px;
			box-shadow: 0 5px 5px 4px #e0e0e0;
		}
		
		.shop-label {
			position: absolute;
			top: 30px;
			left: 40px;
		}
		
		.shop-img-div {
			width: 170px;
			height: 200px;
			background-color: #c8e5bc;
			position: absolute;
			top: 20px;
			left: 150px;
			border-radius: 5px;
			overflow: hidden;
		}
		
		.shop-img {
			width: 100%;
			position: relative;
			top: 10px;
		}
		
		.show-span-div {
			width: 240px;
			height: 124px;
			background-color: #ffffff;
			position: absolute;
			left: 360px;
			top: 20px;
			-webkit-line-clamp: 6;
			-webkit-box-orient: vertical;
			overflow: hidden;
			display: -webkit-box;
		}
		
		.price {
			position: absolute;
			left: 650px;
			top: 30px;
			font: 20px "";
		}
		
		.number-div {
			width: 90px;
			height: 26px;
			position: absolute;
			top: 30px;
			left: 850px;
			background-color: #b5ccbf;
			overflow: hidden;
		}
		
		.btn-sub {
			width: 26px;
			height: 26px;
			font: 20px/16px "";
			position: absolute;
			left: 0;
			z-index: 2;
		}
		
		.number {
			width: 100px;
			position: absolute;
			left: 16px;
			height: 22px;
			padding-left: 20px;
			z-index: 1;
			outline: none;
		}
		
		.btn-sum {
			width: 26px;
			height: 26px;
			font: 20px/16px "";
			position: absolute;
			left: 64px;
			z-index: 2;
		}
		
		.subtotal {
			position: absolute;
			top: 30px;
			left: 1100px;
			font: 20px "";
		}

		.delete {
			position: absolute;
			top: 30px;
			left: 1260px;
			font: 20px "";
			width: 70px;
			height: 30px;
			text-align: center;
			padding-top: 3px;
			border-radius: 2px;
			border: 1px solid #4cbd37;
		}

		.shop-label {
			width: 50px;
			height: 150px;
			background-color: white;
		}
		
		#subtotal {
			width: 100%;
			height: 40px;
			position: relative;
			top: 190px;
		}

		#submain {
			position: absolute;
			top: 5px;
			right: 300px;
		}

		#go {
			width: 100px;
			height: 100%;
			display: flex;
			align-items: center;
			justify-content: center;
			font: 20px "";
			color: white;
			background-color: #e64347;
			right: 100px;
			position: absolute;
			cursor: pointer;
			transition: all .6s ease-in-out;
		}

		#sub-1 {
			color: #e64347;
			font: 17px "";
		}

		#sub-2 {
			color: #e64347;
			font: 600 20px "";
		}

		#go:hover {
			width: 160px;
		}

	</style>
</head>
<body>
<div id="bigBox">
	<div id="body">
		<h1 id="h1">
			购物车
		</h1>

		<div id="heard">
			<label for="header-btn" id="heard-label">
				<input id="header-btn" name="" type="checkbox">
				全选
			</label>
			<span id="span-1">商品</span>
			<span id="span-2">单价</span>
			<span id="span-3">数量</span>
			<span id="span-4">小计</span>
			<span id="span-5">操作</span>
		</div>

		<ul id="body-ul">
			<li>
				<label class="shop-label">
					<input class="shop-checked" name="shop-checked" type="checkbox">
				</label>
				<div class="shop-img-div">
					<img alt="" class="shop-img" src="file/1600414912988.jpeg">
				</div>
				<div class="show-span-div">
					我是商品介绍，啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦，啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦，啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦，
					啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦，啦啦啦零零零零啦了
				</div>
				<span class="price">
							12.90
						</span>
				<div class="number-div">
					<button class="btn-sub" type="button">-</button>
					<label class="number-label">
						<input class="number" max="99" min="1" name="number" type="number" value="2">
					</label>
					<button class="btn-sum" type="button">+</button>
				</div>
				<div class="subtotal">
					12.90
				</div>
				<div class="delete">
					删除
				</div>
			</li>
			<li>
				<label class="shop-label">
					<input class="shop-checked" name="shop-checked" type="checkbox">
				</label>
				<div class="shop-img-div">
					<img alt="" class="shop-img" src="file/爱上你我总在学会_109951164791652570.jpg">
				</div>
				<div class="show-span-div">
					我是商品介绍，啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦，啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦，啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦，
					啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦，啦啦啦零零零零啦了
				</div>
				<span class="price">
							22.90
						</span>
				<div class="number-div">
					<button class="btn-sub" type="button">-</button>
					<label class="number-label">
						<input class="number" max="99" min="1" name="number" type="number" value="2">
					</label>
					<button class="btn-sum" type="button">+</button>
				</div>
				<div class="subtotal">
					22.90
				</div>
				<div class="delete">
					删除
				</div>
			</li>
			<li>
				<label class="shop-label">
					<input class="shop-checked" name="shop-checked" type="checkbox">
				</label>
				<div class="shop-img-div">
					<img alt="" class="shop-img" src="file/v2-d18e1f982432df8bcdd444c64725acd9.jpg">
				</div>
				<div class="show-span-div">
					我是商品介绍，啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦，啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦，啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦，
					啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦，啦啦啦零零零零啦了
				</div>
				<span class="price">
							12.10
						</span>
				<div class="number-div">
					<button class="btn-sub" type="button">-</button>
					<label class="number-label">
						<input class="number" max="99" min="1" name="number" type="number" value="2">
					</label>
					<button class="btn-sum" type="button">+</button>
				</div>
				<div class="subtotal">
					12.10
				</div>
				<div class="delete">
					删除
				</div>
			</li>
			<li>
				<label class="shop-label">
					<input class="shop-checked" name="shop-checked" type="checkbox">
				</label>
				<div class="shop-img-div">
					<img alt="" class="shop-img" src="file/de181691089d16048e34bc3a031561b1.jpg">
				</div>
				<div class="show-span-div">
					我是商品介绍，啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦，啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦，啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦，
					啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦，啦啦啦零零零零啦了
				</div>
				<span class="price">
							62.90
						</span>
				<div class="number-div">
					<button class="btn-sub" type="button">-</button>
					<label class="number-label">
						<input class="number" max="99" min="1" name="number" type="number" value="2">
					</label>
					<button class="btn-sum" type="button">+</button>
				</div>
				<div class="subtotal">
					62.90
				</div>
				<div class="delete">
					删除
				</div>
			</li>
			<li>
				<label class="shop-label">
					<input class="shop-checked" name="shop-checked" type="checkbox">
				</label>
				<div class="shop-img-div">
					<img alt="" class="shop-img" src="file/1605923470663.jpeg">
				</div>
				<div class="show-span-div">
					我是商品介绍，啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦，啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦，啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦，
					啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦，啦啦啦零零零零啦了
				</div>
				<span class="price">
							1.90
						</span>
				<div class="number-div">
					<button class="btn-sub" type="button">-</button>
					<label class="number-label">
						<input class="number" max="99" min="1" name="number" type="number" value="2">
					</label>
					<button class="btn-sum" type="button">+</button>
				</div>
				<div class="subtotal">
					1.90
				</div>
				<div class="delete">
					删除
				</div>
			</li>
			<li>
				<label class="shop-label">
					<input class="shop-checked" name="shop-checked" type="checkbox">
				</label>
				<div class="shop-img-div">
					<img alt="" class="shop-img" src="file/856404094.jpg">
				</div>
				<div class="show-span-div">
					我是商品介绍，啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦，啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦，啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦，
					啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦，啦啦啦零零零零啦了
				</div>
				<span class="price">
							190
						</span>
				<div class="number-div">
					<button class="btn-sub" type="button">-</button>
					<label class="number-label">
						<input class="number" max="99" min="1" name="number" type="number" value="2">
					</label>
					<button class="btn-sum" type="button">+</button>
				</div>
				<div class="subtotal">
					190
				</div>
				<div class="delete">
					删除
				</div>
			</li>
			<li>
				<label class="shop-label">
					<input class="shop-checked" name="shop-checked" type="checkbox">
				</label>
				<div class="shop-img-div">
					<img alt="" class="shop-img" src="file/59976141212Tkqw.jpg">
				</div>
				<div class="show-span-div">
					我是商品介绍，啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦，啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦，啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦，
					啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦，啦啦啦零零零零啦了
				</div>
				<span class="price">
							32.90
						</span>
				<div class="number-div">
					<button class="btn-sub" type="button">-</button>
					<label class="number-label">
						<input class="number" max="99" min="1" name="number" type="number" value="2">
					</label>
					<button class="btn-sum" type="button">+</button>
				</div>
				<div class="subtotal">
					32.90
				</div>
				<div class="delete">
					删除
				</div>
			</li>
		</ul>

		<div id="subtotal">
			<div id="submain">
				已选择 <span id="sub-1">1</span>件商品
				总价 <span id="sub-2">1111.00</span>
			</div>
			<div id="go">
				去结算
			</div>
		</div>
	</div>
</div>
</body>
<script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.6.0/jquery.js"></script>
<script>
	window.onload = function () {
		// 实现全选和取消全选
		let heard_btn = document.getElementById('header-btn')
		let lis_btn = document.getElementById("body-ul").getElementsByClassName("shop-checked")

		// 全选
		heard_btn.onclick = function () {
			for (let lisBtnKey of lis_btn) {
				lisBtnKey.checked = heard_btn.checked
				goMoney()
			}
		}
		
		//	 小按钮
		for (let lisBtnElement of lis_btn) {
			lisBtnElement.onclick = function () {
				let len = 0
				for (let lisBtnKey of lis_btn) {
					if (lisBtnKey.checked) {
						len++
					}
				}
				heard_btn.checked = len === lis_btn.length;
				goMoney()
			}
		}


		//	数字
		let nums = document.getElementsByClassName("number")
		let sub_btn = document.getElementsByClassName("btn-sub")
		let sub_sum = document.getElementsByClassName("btn-sum")
		// 指定最大值，最小值
		for (let num of nums) {
			num.oninput = function () {
				this.value = this.value >= 98 ? 98 : this.value;
				this.value = this.value <= 1 ? 1 : this.value;
				comeMoney()
			}
		}


		//	按钮增加
		for (let i = 0; i < sub_btn.length; i++) {
			sub_btn[i].onclick = function () {
				nums[i].value--
				nums[i].value = nums[i].value <= 1 ? 1 : nums[i].value;
				if (nums[i].value <= 1) {
					sub_btn[i].style.cursor = 'not-allowed'
				} else {
					sub_sum[i].style.cursor = 'default'
				}
				comeMoney()
				goMoney()
			}
		}

		for (let i = 0; i < sub_sum.length; i++) {
			sub_sum[i].onclick = function () {
				nums[i].value++
				nums[i].value = nums[i].value >= 99 ? 99 : nums[i].value;
				if (nums[i].value >= 99) {
					sub_sum[i].style.cursor = 'not-allowed'
				} else {
					sub_btn[i].style.cursor = 'default'
				}
				comeMoney()
				goMoney()
			}
		}

		//	小计的价格问题
		let subtotal = document.getElementsByClassName("subtotal")
		let price = document.getElementsByClassName("price")

		function comeMoney() {
			for (let i = 0; i < subtotal.length; i++) {
				subtotal[i].innerHTML = (nums[i].value * price[i].innerHTML).toFixed(2)
			}
		}

		comeMoney()

		let submain = document.getElementById("submain")
		let total
		let num

		function goMoney() {
			total = 0
			num = 0
			for (let i = 0; i < lis_btn.length; i++) {
				if (lis_btn[i].checked) {
					total += (Number(subtotal[i].innerHTML))
					num++
				}
			}
			submain.innerHTML = `已选择 <span id="sub-1">${num}</span>件商品
						         总价 <span id="sub-2">${total.toFixed(2)}</span>`
		}

		goMoney()

		let go = document.getElementById("go")
		go.onclick = function () {
			alert("一共是" + total + "元")
		}


		let deletes = document.getElementsByClassName("delete")
		let lis = document.querySelectorAll('li')
		console.log(deletes);
		for (let i = 0, len = deletes.length; i < len; i++) {
			deletes[i].onclick = function () {
				lis[i].style.left = "1500px"
				setTimeout(function () {
					lis[i].style.height = "0"
					lis[i].style.marginTop = "0"
					setTimeout(function () {
						lis[i].parentNode.removeChild(lis[i])
					}, 1000)
				}, 1000)
			}
		}
	}

</script>
</html>
