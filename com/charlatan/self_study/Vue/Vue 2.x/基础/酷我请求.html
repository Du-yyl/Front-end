<!--
  ~ Time:2022/2/18 12:02 13
  ~ Name:酷我请求.html
  ~ Path:Web代码/src/com/charlatan/self_study/Vue/Vue 2.x/基础
  ~ ProjectName:WWW
  ~ Author:charlatan
  ~
  ~  Il n'ya qu'un héroïsme au monde : c'est de voir le monde tel qu'il est et de l'aimer.
  -->
<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta content="IE=edge" http-equiv="X-UA-Compatible">
	<meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
	<title>Title</title>

</head>
<body>

<button id="btn">测试</button>
</body>
<script>
	let btn = document.getElementById('btn')
	let num = 0
	// btn.onclick = onSaveMaterial
	//
	// async function onSaveMaterial() {
	// 	try {
	// 		let nums = await fetch('http://39.96.88.57:9090/api/www/artist/artistInfo?category=' + num + '&prefix=A&pm=1&rn=100')
	// 		num++
	// 		console.log(nums);
	// 	}catch(error){
	// 		// throw error
	// 		console.log("error.message")
	// 	}
	// }

	// btn.onclick = function () {
	// 	fetch('http://39.96.88.57:9090/api/www/artist/artistInfo?category=' + num + '&prefix=A&pm=1&rn=100').
	// 			then(function (value) {
	// 				num++
	// 				console.log(value)
	// 			}).catch(error => {
	// 		console.log('报错了')
	// 	})
	// }

	// try {
	// 	let res = await fetch('http://39.96.88.57:9090/api/www/artist/artistInfo?category=' + num + '&prefix=A&pm=1&rn=100')
	// 	num++
	// 	if (res.code === 0) {
	// 		console.log("ok");
	// 	}
	// 	console.log(res);
	// }catch(error){
	// 	console.log("error.message")
	// }

	btn.onclick = function () {

		let xhr = new XMLHttpRequest()
		try {

			xhr.open('GET',
					'http://39.96.88.57:9090/api/www/artist/artistInfo?category=' + num + '&prefix=A&pm=1&rn=100')
			num++
			xhr.send()
		} catch (e) {
			console.log('ceshi')
		}
		xhr.onreadystatechange = function () {
			if (xhr.readyState === 4) {
				try {
					if (xhr.status === 200) {
						console.log('正常')
					} else if (xhr.status === 504) {
						alert('')
					}
				} catch (e) {
					console.log('1111')
				}

			}

		}
	}
	setInterval(function () {
		btn.click()

	}, 100)
</script>
</html>
