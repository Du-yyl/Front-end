<!--
  ~ Time:2022/2/21 12:08 28
  ~ Name:13-7模拟一个Vue的数据监视.html
  ~ Path:Web代码/src/com/charlatan/self_study/Vue/Vue 2.x/基础
  ~ ProjectName:WWW
  ~ Author:charlatan
  ~
  ~  Il n'ya qu'un héroïsme au monde : c'est de voir le monde tel qu'il est et de l'aimer.
  -->
<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta content="IE=edge" http-equiv="X-UA-Compatible">
	<meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
	<title>模拟一个Vue的数据监视</title>

</head>
<body>

</body>
<script>
	let obj = {
		name: 'jock',
		age: 20,
		sex: 'man',
	}
	let vm = {}
	let obs = new Observer(obj)
	vm._data = data = obs

	/**
	 * 模拟一个Vue中的数据代理操作，通过获取到属性后，对所有的属性进行遍历，并为每个属性添加上get和set方法
	 * @param obj
	 * @constructor
	 */
	function Observer (obj) {
		let keys = Object.keys(obj)

		keys.forEach(key => {

			Object.defineProperty(this, key, {
				get () {
					console.log('被读取')
					return obj[key]
				},
				set (val) {
					console.log('被修改了')
					obj[key] = val
				},
			})
		})
	}

</script>
</html>
