<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>复选框的全选和取消全选</title>
</head>
<body>
<script type="text/javascript">
	/*
	 window.onload = function(){
	 var firstChk = document.getElementById("firstChk");
	 firstChk.onclick = function(){
	 // 获取第一个复选框的选中状态(复选框对象checkbox对象)
	 //alert(firstChk.checked);
	 // 根据name获取所有元素
	 var aihaos = document.getElementsByName("aihao");
	 if(firstChk.checked){
	 // 全选
	 for(var i = 0; i < aihaos.length; i++){
	 aihaos[i].checked = true;
	 }
	 }else{
	 // 取消全选
	 for(var i = 0; i < aihaos.length; i++){
	 aihaos[i].checked = false;
	 }
	 }
	 }
	 }
	 */

	window.onload = function () {

		var aihaos = document.getElementsByName('aihao')
		var firstChk = document.getElementById('firstChk')
		firstChk.onclick = function () {
			for (var i = 0; i < aihaos.length; i++) {
				aihaos[i].checked = firstChk.checked
			}
		}

		// 对以上数组进行遍历
		var all = aihaos.length
		for (var i = 0; i < aihaos.length; i++) {
			aihaos[i].onclick = function () {
				var checkedCount = 0
				// 总数量和选中的数量相等的时候,第一个复选框选中.
				for (var i = 0; i < aihaos.length; i++) {
					if (aihaos[i].checked) {
						checkedCount++
					}
				}
				firstChk.checked = (all == checkedCount)
				/*
				 if(all == checkedCount){
				 firstChk.checked = true;
				 }else{
				 firstChk.checked = false;
				 }
				 */
			}
		}
	}
</script>
<input id="firstChk" type="checkbox"/><Br>
<input name="aihao" type="checkbox" value="smoke"/>抽烟<Br>
<input name="aihao" type="checkbox" value="drink"/>喝酒<Br>
<input name="aihao" type="checkbox" value="tt"/>烫头<Br>
</body>
</html>
