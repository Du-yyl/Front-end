<!--
  ~ Date:2022/1/8 14:08 19
  ~ Name:promise的then.html
  ~ Path:Web代码/src/com/charlatan/self_study/JavaScript/ES6-ES11/ES6/promise
  ~ ProjectName:WWW
  ~ Author:charlatan
  ~
  ~  Il n'ya qu'un héroïsme au monde : c'est de voir le monde tel qu'il est et de l'aimer.
  -->
<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>promise的then</title>

</head>
<body>
<pre>
	then 的返回结果是 promise 对象，对象的状态由回调函数的执行结果决定
		如果回调函数中返回的是非promise数据，状态为成功，并将返回的数据进行输出
		如果返回的是一个promise对象，那么then的返回的成功与否，会根promise的返回类型进行决定
		如果抛出错误，then的结果也是错误的
</pre>
</body>
<script>
	let pro = new Promise (((resolve, reject) => {
		setTimeout (function () {
			resolve ('用户数据')
		}, 1000)
	}))

	console.log (pro.then ((value => {
		console.log (value)
		// return 123
		// return new Promise(((resolve, reject) => {
		// 	// resolve("这是测试")
		//     reject('这是测试2')
		// }))
		// throw new Error("出错测试")
	}), (reason => {
		console.log (reason)
	})))

	//    链式调用
	let p = new Promise ((resolve, reject) => {
		setTimeout (() => {
			resolve ('第一个')
		}, 1000)
	})

	p.then ((value => {
		setTimeout (function () {
			console.log (value)
		}, 1000)
	})).then ((() => {
		setTimeout (function () {
			console.log ('第二个')
		}, 2000)
	})).then ((() => {
		setTimeout (() => {
			console.log ('第三个')
		}, 3000)
	}))


</script>
</html>
